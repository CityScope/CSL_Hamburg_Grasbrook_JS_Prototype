(this.webpackJsonpcityscopejs=this.webpackJsonpcityscopejs||[]).push([[0],{224:function(e,t){},235:function(e,t,a){},326:function(e,t,a){e.exports=a(380)},353:function(e,t){},376:function(e,t,a){},380:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),i=a.n(o),s=(a(235),a(59)),l=a(60),c=a(62),u=a(61),d=a(28),p=function(e){var t=e.children,a=e.store;return r.a.createElement(d.a,{store:a},t)},m=a(178),h=a(22);function g(e){return{type:"LISTEN_TO_ABM_SLIDERS",data:e}}function f(e){return{type:"LISTEN_TO_EDIT_MENU",data:e}}for(var E=a(43),y=Object.keys(E.menu.toggles),v=[],b=0;b<y.length;b++)Object.values(E.menu.toggles)[b].showOnInit&&v.push(y[b]);var O={MENU:v,CITYIO:{},MAP:{},SLIDERS:{time:[E.map.layers.ABM.startSimHour,E.map.layers.ABM.startSimHour,E.map.layers.ABM.endSimHour],speed:E.map.layers.ABM.animationSpeed},ACCESS_TOGGLE:0,SELECTED_TYPE:{height:0,color:[255,0,0,200],name:"Select Land-Use!"},READY:!1,LOADING:!1};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CITYIO_DATA":return Object(h.a)(Object(h.a)({},e),{},{CITYIO:t.data});case"MENU_INTERACTION":return Object(h.a)(Object(h.a)({},e),{},{MENU:t.data});case"LISTEN_TO_MAP_EVENTS":return Object(h.a)(Object(h.a)({},e),{},{MAP:t.data});case"LISTEN_TO_ABM_SLIDERS":return Object(h.a)(Object(h.a)({},e),{},{SLIDERS:t.data});case"LISTEN_TO_ACCESS_TOGGLE":return Object(h.a)(Object(h.a)({},e),{},{ACCESS_TOGGLE:t.data});case"LISTEN_TO_EDIT_MENU":return Object(h.a)(Object(h.a)({},e),{},{SELECTED_TYPE:t.data});case"SET_READY_STATE":return Object(h.a)(Object(h.a)({},e),{},{READY:t.data});case"SET_LOADING_STATE":return Object(h.a)(Object(h.a)({},e),{},{LOADING:t.data});default:return e}}var D=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),w=function(){return Object(m.b)(S,D)},T=a(129),k=a(153),I=a.n(k),j=["background: linear-gradient(#10B500, #0086B5)","border: 1px solid #ffffff","color: black","display: block","line-height: 20px","text-align: center","font-weight: bold"].join(";"),C=["background: linear-gradient(#00FF04 ,#FF00E0 )","border: 1px solid #ffffff","color: black","display: block","line-height: 20px","text-align: center","font-weight: bold"].join(";"),M=["background: linear-gradient(#FF0000 ,#FF8633 )","border: 1px solid #ffffff","color: black","display: block","line-height: 20px","text-align: center","font-weight: bold"].join(";"),R=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleURL=function(){"mockAPI"===n.props.tableName?n.cityioURL=E.cityIO.mockURL:n.cityioURL=E.cityIO.baseURL+n.props.tableName,n.getCityIOHash(n.cityioURL+"/meta"),n.timer=setInterval((function(){n._isMounted&&n.getCityIOHash(n.cityioURL+"/meta")}),E.cityIO.interval),console.log("%c starting cityIO GET interval every "+E.cityIO.interval+"ms ",M)},n.getCityIOHash=function(e){I.a.get(e).then((function(e){n.handleCityIOHashes(e.data)})).catch((function(e){console.log(e)}))},n.handleCityIOHashes=function(e){e.id!==n.state.oldHashs.id&&(n.setState({cityIOmodulesStatus:{}}),n.props.setLoadingState(!0),E.cityIO.cityIOmodules.forEach((function(t){e.hashes[t]!==n.state.oldHashs[t]?(n.setNestedState("cityIOmodulesStatus",t,!1),n.getCityIOmoduleData(t,n.cityioURL+"/"+t),n.setNestedState("oldHashs",t,e.hashes[t])):n.setNestedState("cityIOmodulesStatus",t,!0)})),n.setNestedState("oldHashs","id",e.id))},n.setNestedState=function(e,t,a){var r=Object(h.a)({},n.state[e]);r[t]=a,n.setState(Object(T.a)({},e,r))},n.getCityIOmoduleData=function(e,t){I.a.get(t).then((function(t){n.setNestedState("cityIOmodulesData",e,t.data),console.log("...updating module:",e),n.checkDoneCityIO(e)})).catch((function(e){e.response?console.log("error.response:","\n",e.response.data,"\n",e.response.status,"\n",e.response.headers):e.request?console.log("error.request:",e.request):console.log("misc error:",e.message),console.log("request config:",e.config)}))},n.checkDoneCityIO=function(e){for(var t in n.setNestedState("cityIOmodulesStatus",e,!0),n.state.cityIOmodulesStatus)if(!0!==n.state.cityIOmodulesStatus[t])return;var a=n.state.cityIOmodulesData;a.tableName=n.props.tableName,n.props.getCityioData(a),console.log("%c done updating from cityIO",C),n.props.setReadyState(!0),n.props.setLoadingState(!1)},n.state={oldHashs:{},cityIOmodulesData:{}},n.cityioURL=null,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.handleURL()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return null}}]),a}(n.Component),_={getCityioData:function(e){return{type:"GET_CITYIO_DATA",data:e}},setReadyState:function(e){return{type:"SET_READY_STATE",data:e}},setLoadingState:function(e){return{type:"SET_LOADING_STATE",data:e}}},A=Object(d.b)(null,_)(R),N=a(197),L=a(91),x=a(437),G=a(419),P=a(447),F=a(426),U=a(425),B=a(446),W=a(424),z=a(421),H=a(423),V=a(445),Y=a(436),q=a(284),K=a(420);var J=Object(d.b)((function(e){return{cityioData:e.CITYIO}}),null)((function(e){var t=Object(q.a)({overrides:{MuiSlider:{thumb:{color:"#FFF5"},track:{color:"white"},rail:{color:"white"},markActive:{color:"white"},markLabelActive:{color:"white"},markLabel:{color:"white"}}}}),a=Object(G.a)((function(e){return{drawer:{background:"#1D1F21",width:300,zIndex:e.zIndex.drawer+1},listItemPrimaryText:{color:"#FFF"},listItemSecondaryText:{color:"#999",fontSize:"0.7em"},list:{color:"#999"},dividerColor:{backgroundColor:"#484848"}}}))(),n=r.a.useState(null),o=Object(L.a)(n,2),i=o[0],s=o[1],l=Object(d.c)(),c=Object(d.d)((function(e){return e.SELECTED_TYPE})),u=c.height,p=[{value:0,label:"0 floors"},{value:50,label:"50 floors"}];return r.a.createElement(x.a,{className:a.drawer,variant:"persistent",anchor:"right",open:!0,classes:{paper:a.drawer}},r.a.createElement(F.a,null,function(e){var n=[];return Object.keys(e).forEach((function(o){var d,m=e[o].color,g="rgb("+m[0]+","+m[1]+","+m[2]+")",E=i===o;e[o].LBCS.forEach((function(e){d=Object.keys(e.use)[0]})),n.push(r.a.createElement(K.a,{theme:t},r.a.createElement(z.a,{key:Math.random(),variant:"inset",component:"li",classes:{root:a.dividerColor}}),r.a.createElement(B.a,{key:Math.random(),alignItems:"flex-start",button:!0,variant:"raised",selected:E,onClick:function(t){return a=o,(n=e[o]).name=a,s(a),void l(f(n));var a,n},className:a.list},r.a.createElement(H.a,null,r.a.createElement(V.a,{style:{backgroundColor:g}},o.charAt(0))),r.a.createElement(W.a,{classes:{primary:a.listItemPrimaryText,secondary:a.listItemSecondaryText},primary:o,secondary:r.a.createElement(r.a.Fragment,null,"LBCS: "+d)})),r.a.createElement(U.a,{in:E,key:Math.random()},r.a.createElement(Y.a,{m:2,width:.8},r.a.createElement(P.a,{key:Math.random(),value:u,valueLabelDisplay:"auto",className:a.list,onChangeCommitted:function(e,t){return l(f(Object(h.a)(Object(h.a)({},c),{},{height:t})))},getAriaLabel:function(e){return e.toString()},min:0,max:50,marks:p})))))})),n}(e.cityioData.GEOGRID.properties.types)))})),X=a(24),Z=a(443),Q=Object(G.a)({root:{display:"flex",paddingLeft:16,paddingRight:16},paper:{background:"#1D1F21"},list:{width:"23vw",color:"#FFF"},text:{marginLeft:16,marginTop:12,flexGrow:1,fontSize:20,marginBottom:12,fontWeight:"lighter"}}),$=Object(X.a)({switchBase:{"&$checked + $track":{backgroundColor:"#ff5278"}},checked:{},track:{}})(Z.a),ee=a(205),te=a(427),ae=Object(G.a)({root:{width:"80%",marginLeft:28},subtitle1:{marginTop:12},subtitle2:{marginTop:12},markLabel:{color:"white"}});var ne=function(){var e=ae(),t=Object(d.d)((function(e){return e.SLIDERS})),a=Object(d.c)();return r.a.createElement("div",{className:e.root},r.a.createElement(ee.a,{className:e.subtitle1,variant:"subtitle2",id:"range-slider",gutterBottom:!0},"Simulation Range"),r.a.createElement(P.a,{classes:{markLabel:e.markLabel},min:0,max:86400,marks:[{value:0,label:"12AM"},{value:21600,label:"6AM"},{value:43200,label:"12PM"},{value:64800,label:"6PM"},{value:86400,label:"12AM"}],value:t.time,onChange:function(e,n){a(g(Object(h.a)(Object(h.a)({},t),{},{time:n})))},valueLabelDisplay:"off","aria-labelledby":"range-slider"}),r.a.createElement(ee.a,{className:e.subtitle2,variant:"subtitle2",id:"continuous-slider",gutterBottom:!0},"Simulation Speed"),r.a.createElement(P.a,{min:0,max:100,value:t.speed,onChange:function(e,n){a(g(Object(h.a)(Object(h.a)({},t),{},{speed:n})))},valueLabelDisplay:"auto","aria-labelledby":"continuous-slider"}))};var re=function(e){var t=Object(d.d)((function(e){return e.ACCESS_TOGGLE})),a=e.cityioData,n=a&&a.access&&a.access.properties?a.access.properties:[],o=Object(d.c)();return r.a.createElement(F.a,null,n.map((function(e,a){return r.a.createElement(B.a,{key:e},r.a.createElement(W.a,{primary:e,style:{textTransform:"capitalize"}}),r.a.createElement(te.a,null,r.a.createElement($,{edge:"end",checked:t===a,onChange:function(){o({type:"LISTEN_TO_ACCESS_TOGGLE",data:a})}})))})))};var oe=function(e){for(var t=Q(),a=e.open,n=e.toggleDrawer,o=e.handleToggle,i=Object(d.d)((function(e){return{menuState:e.MENU,cityioData:e.CITYIO}})),s=i.menuState,l=i.cityioData,c=E.menu.toggles,u=Object.keys(c),p=[],m=Object.keys(l),h=0;h<u.length;h++){var g=c[u[h]].requireModule,f=!!s.includes(u[h]);if(m.includes(g)||!1===g){var y=r.a.createElement("div",{key:u[h]},r.a.createElement(B.a,null,r.a.createElement(W.a,{primary:c[u[h]].displayName}),r.a.createElement(te.a,null,r.a.createElement($,{edge:"end",onChange:o(u[h]),checked:f}))),"ABM"===u[h]&&r.a.createElement(U.a,{in:f,style:{width:"100%"}},r.a.createElement(ne,null)),"ACCESS"===u[h]&&r.a.createElement(U.a,{in:f,style:{width:"80%",marginLeft:24}},r.a.createElement(re,{cityioData:l})));p.push(y)}}return r.a.createElement(x.a,{className:t.root,BackdropProps:{invisible:!0},classes:{paper:t.paper},anchor:"left",open:a,onClose:n},r.a.createElement(F.a,{className:t.list},r.a.createElement(ee.a,{variant:"h5",className:t.text,gutterBottom:!0},"CityScopeJS"),p))},ie=Object(G.a)({root:{display:"flex",flexDirection:"column",position:"fixed",paddingLeft:16,paddingTop:8,zIndex:1},menuButton:{marginTop:8,marginBottom:8},editButton:{marginTop:8,marginBottom:8},resetViewButton:{marginTop:8,marginBottom:8},templatesButton:{marginTop:8,marginBottom:8}}),se=a(428),le=a(264),ce=a.n(le),ue=a(266),de=a.n(ue),pe=a(265),me=a.n(pe),he=a(269),ge=a.n(he),fe=a(268),Ee=a.n(fe),ye=a(267),ve=a.n(ye);function be(e){var t=ie(),a=Object(d.d)((function(e){return e.MENU})),n=e.handleToggle,o=e.toggleDrawer;return r.a.createElement("div",{className:t.root},r.a.createElement(se.a,{className:t.menuButton,onClick:o,style:{backgroundColor:"#1D1F21"}},r.a.createElement(ce.a,{style:{color:"FFF"}})),r.a.createElement(se.a,{className:t.editButton,onClick:n("EDIT"),style:{backgroundColor:"#1D1F21"}},a.includes("EDIT")?r.a.createElement(me.a,{style:{color:"FFF"}}):r.a.createElement(de.a,{style:{color:"FFF"}})),r.a.createElement(se.a,{className:t.resetViewButton,onClick:n("RESET_VIEW"),style:{backgroundColor:"#1D1F21"}},a.includes("RESET_VIEW")?r.a.createElement(ve.a,{style:{color:"FFF"}}):r.a.createElement(Ee.a,{style:{color:"FFF"}})),r.a.createElement(se.a,{className:t.templatesButton,onClick:n("TEMPLATES"),style:{backgroundColor:"#1D1F21"}},r.a.createElement(ge.a,{style:{color:"FFF"}})))}var Oe=function(){var e=Object(d.d)((function(e){return e.MENU})),t=Object(d.c)(),a=r.a.useState({drawerOpen:!1}),n=Object(L.a)(a,2),o=n[0],i=n[1],s=function(){i(Object(h.a)(Object(h.a)({},o),{},{drawerOpen:!o.drawerOpen}))},l=function(a){return function(){var n=e.indexOf(a),r=Object(N.a)(e);-1===n?r.push(a):r.splice(n,1),t({type:"MENU_INTERACTION",data:r})}},c=e&&e.includes("EDIT");return r.a.createElement("div",null,r.a.createElement(oe,{open:o.drawerOpen,toggleDrawer:s,handleToggle:l}),r.a.createElement(be,{toggleDrawer:s,handleToggle:l}),c&&r.a.createElement(J,{key:"EDIT"}))},Se=function(e){var t=e.selectedType;if(!e.mousePos)return null;var a=e.mousePos,n=e.divSize,o=t.color,i="rgb("+o[0]+","+o[1]+","+o[2]+")",s="rgba("+o[0]+","+o[1]+","+o[2]+",0.6)",l=a.clientX-n/2,c=a.clientY-n/2;return r.a.createElement("div",{style:{border:"2px solid",backgroundColor:e.mouseDown?s:"rgba(0,0,0,0)",borderColor:i,color:i,borderRadius:"15%",position:"fixed",zIndex:1,pointerEvents:"none",width:n,height:n,left:l,top:c}},r.a.createElement("div",{style:{position:"relative",left:n+10,fontSize:"0.5em"}},t.name))},De=function(e){if(!e.mousePos)return null;var t=e.mousePos;return r.a.createElement("div",{style:{borderRadius:"15%",position:"fixed",pointerEvents:"none",backgroundColor:"rgba(0,0,0,0.5)",padding:"1vw",color:"rgba(255,255,255,0.9)",zIndex:1,left:t.clientX,top:t.clientY,fontSize:"0.65em",fontWeight:500}},r.a.createElement("p",null,"Type:",e.hoveredObj.object.properties.name),r.a.createElement("p",null,"Floors:",e.hoveredObj.object.properties.height),r.a.createElement("p",null,"ID:",e.hoveredObj.object.properties.id))},we=a(351),Te=function(e){var t=E.map.types,a=e.grid,n=e.GEOGRID,r=e.GEOGRIDDATA;if(r&&r.length>0)for(var o=0;o<n.features.length;o++)n.features[o].properties=r[o],n.features[o].properties.id=o;else for(var i=0;i<n.features.length;i++)n.features[i].properties.id=i,n.features[i].properties.color=[0,0,0,0],n.features[i].properties.height=.1,n.features[i].properties.name="empty",n.features[i].properties.interactive=!0;var s=e.GEOGRID.properties.geogrid_to_tui_mapping,l=0;for(var c in s){var u=a[l][0],d=n.features[c].properties;if(d.type=u,-1!==a[l][0]){var p=Object.values(t)[a[l][0]];d.color=p.color,d.height=p.height}else console.log("... got null type...");l+=1}return JSON.parse(JSON.stringify(n))},ke=function(e){for(var t=e.GEOGRID.features,a={type:"FeatureCollection",features:[]},n=e.GEOGRID.properties.header.nrows,r=e.GEOGRID.properties.header.ncols,o=0,i=0;i<n;i++)for(var s=0;s<r;s++){var l={type:"Feature",properties:{land_use:"network",netWidth:5,color:[255,255,255,150],gridPosition:[s,i]},geometry:{type:"Point",coordinates:t[o].geometry.coordinates[0][0]}};a.features.push(l),o+=1}return a},Ie=function(e){for(var t=e.GEOGRID,a=[],n=e.GEOGRID.properties.header.nrows,r=e.GEOGRID.properties.header.ncols,o=0,i=0;i<n;i++)for(var s=0;s<r;s++)a[o]={text:[s,i].toString(),coordinates:[t.features[o].geometry.coordinates[0][0][0],t.features[o].geometry.coordinates[0][0][1],t.features[o].properties.height+10]},o+=1;return a},je=function(e){for(var t=e.access,a=t.features.map((function(e){return e.geometry.coordinates})),n=t.features.map((function(e){return e.properties})),r=[],o=0;o<a.length;o++)r.push({coordinates:a[o],values:n[o]});return r},Ce=function(e,t,a){var n={method:"post",url:"mockAPI"===t?E.cityIO.mockURL+a:"https://cityio.media.mit.edu/api/table/update/"+t+a,data:e,headers:{"Content-Type":"application/json",Accept:"application/json"}};I()(n).catch((function(e){console.log("%c"+e,C),console.log("ERROR:",e)}))},Me=function(e){for(var t={},a=e.GEOGRID.features,n=e.GEOGRID.properties.header.nrows,r=e.GEOGRID.properties.header.ncols,o=0,i=0;i<n;i++)for(var s=0;s<r;s++){var l=a[o].geometry.coordinates[0][0];t[[s,i].toString()]=l,o+=1}return t},Re=a(283),_e=a(444),Ae=a(432),Ne=(a(352),a(440)),Le=a(439),xe=a(285),Ge=a(204),Pe=a(441),Fe=a(382),Ue=a(261),Be=a(151),We=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._onViewStateChange=function(e){var t=e.viewState;t.orthographic=!!n.props.menu.includes("RESET_VIEW"),n.setState({viewState:t})},n._mulipleObjPicked=function(e){var t=n.state.pickingRadius,a=e.x-t/2,r=e.y-t/2;return n.deckGL.pickObjects({x:a,y:r,width:t,height:t})},n._handleGridcellEditing=function(e){var t=n.props.selectedType,a=t.height,r=t.color,o=t.name,i=n._mulipleObjPicked(e);i.forEach((function(e){var t=e.object.properties;t&&!0===t.interactive&&(t.old_height=t.height,t.old_color=t.color,t.color=r,t.height=a,t.name=o)})),n.setState({selectedCellsState:i})},n._handleNetworkHover=function(e){var t=n.props.selectedType;if(e&&e.object&&e.object.properties&&"Clear network"!==t.name){var a=e.object.properties;a.old_color=a.color,a.color=t.color,a.old_netWidth=a.netWidth,a.netWidth=2*a.netWidth,n.setState({hoveredPnt:e.object}),a.color=a.old_color,a.netWidth=a.old_netWidth,n.setState({hoveredPnt:e.object})}},n._handleNetworkRemove=function(e){var t=n.props.selectedType;e.object&&"Delete Path"===t.name&&(e=e.object,n.state.networkLayer.forEach((function(t,a,r){if(t.id===e.id){r.splice(a,1);var o=JSON.parse(JSON.stringify(r));n.setState({networkLayer:o})}})))},n._handleNetworkCreate=function(e){var t=n.props.selectedType;if("Delete Path"!==t.name)if(n.state.networkFirstPoint){var a=n.deckGL.pickObject({x:e.x,y:e.y});if(a&&"networkClass"===t.class&&"Clear network"!==t.name){var r,o=n.state.networkFirstPoint.object.properties.gridPosition,i=a.object.properties.gridPosition,s={path:function(e,t,a,n,r){var o,i,s,l,c,u,d,p,m,h,g,f=function(e,t){var a=[e,t].toString();E.push(r[a])},E=[];if(s=a-e,l=n-t,c=Math.abs(s),d=2*(u=Math.abs(l))-c,p=2*c-u,u<=c)for(s>=0?(o=e,i=t,m=a):(o=a,i=n,m=e),f(o,i),g=0;o<m;g++)o+=1,d<0?(d+=2*u,f(o,i)):(s<0&&l<0||s>0&&l>0?i+=1:i-=1,d+=2*(u-c),f(o-1,i)),f(o,i);else if(u>c)for(l>=0?(o=e,i=t,h=n):(o=a,i=n,h=t),f(o,i),g=0;i<h;g++)i+=1,p<=0?(p+=2*c,f(o,i)):(s<0&&l<0||s>0&&l>0?o+=1:o-=1,p+=2*(c-u),f(o,i-1)),f(o,i);return E}(o[0],o[1],i[0],i[1],n.state.bresenhamGrid),id:(r=Array.isArray(n.state.networkLayer)?n.state.networkLayer:[]).length,selectedType:n.props.selectedType};r.push(s),r=JSON.parse(JSON.stringify(r)),n.setState({networkLayer:r}),n.setState({networkFirstPoint:null})}}else n.setState({networkFirstPoint:e})},n._renderSelectionTarget=function(){return n.props.menu.includes("EDIT")?n.props.selectedType&&r.a.createElement(Se,{mousePos:n.state.mousePos,selectedType:n.props.selectedType,divSize:n.state.pickingRadius,mouseDown:n.state.mouseDown}):n.state.hoveredObj&&r.a.createElement(De,{mousePos:n.state.mousePos,hoveredObj:n.state.hoveredObj})},n._handleKeyUp=function(){n.setState({keyDownState:null})},n._handleKeyDown=function(e){n.setState({keyDownState:e.nativeEvent.key}),"="===e.nativeEvent.key&&n.state.pickingRadius<100?n.setState({pickingRadius:n.state.pickingRadius+5}):"-"===e.nativeEvent.key&&n.state.pickingRadius>0&&n.setState({pickingRadius:n.state.pickingRadius-5})},n._remapValues=function(e){return e>15&&e<25?3:e<15&&e>10?12:30},n.state={menu:[],cityioData:null,selectedType:null,draggingWhileEditing:!1,selectedCellsState:null,selectedNetState:null,pickingRadius:40,viewState:E.map.initialViewState,networkFirstPoint:null,networkEdge:[],networkLayer:[]},n.animationFrame=null,n.timeZoneOffset=function(e){var t=(new Date).toLocaleString("en-US",{timeZone:we(e.latitude,e.longitude),hour:"2-digit",hour12:!1});return(new Date).getUTCHours()+24-parseInt(t)}(n.props.cityioData.GEOGRID.properties.header),n.dirLightSettings={timestamp:Date.UTC(2019,7,1,11+n.timeZoneOffset),color:[255,255,255],intensity:1,_shadow:!0},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.animationFrame&&window.cancelAnimationFrame(this.animationFrame)}},{key:"componentDidMount",value:function(){var e=this.props.cityioData;this._rightClickViewRotate(),this._setupEffects(),this._setViewStateToTableHeader(),this.setState({networkPnts:ke(e),gridTextData:Ie(e),bresenhamGrid:Me(e),networkLayer:e.GEONETWORK}),this._animate()}},{key:"componentDidUpdate",value:function(e,t){e.menu!==t.menu&&this.setState({menu:this.props.menu});var a=this.props.cityioData;if(t.cityioData!==a&&(this.setState({cityioData:a,GEOGRID:Te(a)}),a.access&&this.setState({access:je(a)})),!e.menu.includes("ABM")&&this.props.menu.includes("ABM")?this.setState({animateABM:!0}):e.menu.includes("ABM")&&!this.props.menu.includes("ABM")&&this.setState({animateABM:!1}),!e.menu.includes("ROTATE")&&this.props.menu.includes("ROTATE")?this.setState({animateCamera:!0}):e.menu.includes("ROTATE")&&!this.props.menu.includes("ROTATE")&&this.setState({animateCamera:!1}),!e.menu.includes("SHADOWS")&&this.props.menu.includes("SHADOWS")&&(this._effects[0].shadowColor=[0,0,0,.5]),e.menu.includes("SHADOWS")&&!this.props.menu.includes("SHADOWS")&&(this._effects[0].shadowColor=[0,0,0,0]),e.menu.includes("EDIT")&&!this.props.menu.includes("EDIT")){for(var n=[],r=0;r<this.state.GEOGRID.features.length;r++)n[r]=this.state.GEOGRID.features[r].properties;Ce(n,a.tableName,"/GEOGRIDDATA"),Ce(this.state.networkLayer,a.tableName,"/GEONETWORK")}!e.menu.includes("RESET_VIEW")&&this.props.menu.includes("RESET_VIEW")?this._setViewStateToTableHeader():e.menu.includes("RESET_VIEW")&&!this.props.menu.includes("RESET_VIEW")&&this.setState({viewState:Object(h.a)(Object(h.a)({},this.state.viewState),{},{pitch:45})})}},{key:"_setViewStateToTableHeader",value:function(){var e=this.props.cityioData.GEOGRID.properties.header;this.setState({viewState:Object(h.a)(Object(h.a)({},this.state.viewState),{},{longitude:e.longitude,latitude:e.latitude,zoom:15,pitch:0,bearing:360-e.rotation,orthographic:!0})})}},{key:"_setupEffects",value:function(){var e=new Fe.a({color:[255,255,255],intensity:.85}),t=new Ue.a(this.dirLightSettings),a=new Be.a({ambientLight:e,dirLight:t});a.shadowColor=[0,0,0,.5],this._effects=[a]}},{key:"_animate",value:function(){if(this.state.animateCamera){var e=this.state.viewState.bearing?this.state.viewState.bearing:0;e<360?e+=.05:e=0,this.setState({viewState:Object(h.a)(Object(h.a)({},this.state.viewState),{},{bearing:e})})}if(this.state.animateABM){var t=this.props.sliders.time[1],a=this.props.sliders.speed,n=this.props.sliders.time[0],r=this.props.sliders.time[2],o=parseInt(t)+parseInt(a);(t<n||t>r)&&(o=n);var i=new Date;i.setHours(0,0,0,0);var s=new Date(i.getTime()+1e3*o);this._effects[0].directionalLights[0].timestamp=Date.UTC(s.getFullYear(),s.getMonth(),s.getDay(),s.getHours(),s.getMinutes(),s.getSeconds()),this.props.listenToSlidersEvents(Object(h.a)(Object(h.a)({},this.props.sliders),{},{time:[this.props.sliders.time[0],o,this.props.sliders.time[2]]}))}this.animationFrame=window.requestAnimationFrame(this._animate.bind(this))}},{key:"_rightClickViewRotate",value:function(){document.getElementById("deckgl-wrapper").addEventListener("contextmenu",(function(e){return e.preventDefault()}))}},{key:"_renderLayers",value:function(){var e=this,t=this.state.viewState.zoom,a=this.props.cityioData,n=[];return this.props.menu.includes("TEXT")&&n.push(new Ne.a({id:"gridText-layer",data:this.state.gridTextData,getText:function(e){return e.text},getPosition:function(e){return e.coordinates},getColor:[255,255,255],getSize:10})),this.props.menu.includes("GRID")&&n.push(new Le.a({id:"GRID",data:this.state.GEOGRID,visible:!!this.props.menu.includes("GRID"),pickable:"networkClass"!==this.props.selectedType.class,extruded:!0,lineWidthScale:1,lineWidthMinPixels:2,getElevation:function(e){return e.properties.height},getFillColor:function(e){return e.properties.color},onClick:function(t){e.props.menu.includes("EDIT")&&"Shift"!==e.state.keyDownState&&e._handleGridcellEditing(t)},onHover:function(t){t.object&&e.setState({hoveredObj:t})},onDrag:function(t){e.props.menu.includes("EDIT")&&"Shift"!==e.state.keyDownState&&e._handleGridcellEditing(t)},onDragStart:function(){e.props.menu.includes("EDIT")&&"Shift"!==e.state.keyDownState&&e.setState({draggingWhileEditing:!0})},onDragEnd:function(){e.setState({draggingWhileEditing:!1})},updateTriggers:{getFillColor:this.state.selectedCellsState,getElevation:this.state.selectedCellsState},transitions:{getFillColor:500,getElevation:500}})),this.props.menu.includes("NETWORK")&&this.state.networkPnts&&this.state.networkPnts.features&&(this.props.menu.includes("EDIT")&&n.push(new xe.a({id:"NETWORK",data:this.state.networkPnts.features,pickable:!0,opacity:1,filled:!0,radiusScale:1,radiusMinPixels:1,radiusMaxPixels:100,getPosition:function(e){return e.geometry.coordinates},getFillColor:function(e){return e.properties.color},getRadius:function(e){return e.properties.netWidth},onHover:function(t){e.props.menu.includes("EDIT")&&"Shift"!==e.state.keyDownState&&e._handleNetworkHover(t)},onClick:function(t){e.props.menu.includes("EDIT")&&"Shift"!==e.state.keyDownState&&e._handleNetworkCreate(t)},updateTriggers:{getFillColor:this.state.hoveredPnt,getRadius:this.state.hoveredPnt},transitions:{getFillColor:100,getRadius:300}})),n.push(new Ge.a({pickable:!0,id:"NETWORK_PATHS",data:this.state.networkLayer,widthScale:1,widthMinPixels:5,getPath:function(e){return e.path},getColor:function(e){return e.selectedType.color},getWidth:function(e){return e.selectedType.width},onClick:function(t){e.props.menu.includes("EDIT")&&"Shift"!==e.state.keyDownState&&e._handleNetworkRemove(t)},updateTriggers:{getPath:this.state.networkLayer},transitions:{getPath:500}}))),this.props.menu.includes("ACCESS")&&n.push(new Pe.a({id:"ACCESS",visible:this.props.menu.includes("ACCESS"),colorRange:E.map.layers.heatmap.colors,radiusPixels:200,opacity:.25,data:this.state.access,getPosition:function(e){return e.coordinates},getWeight:function(t){return t.values[e.props.accessToggle]},updateTriggers:{getWeight:[this.props.accessToggle]}})),this.props.menu.includes("ABM")&&n.push(new Ae.a({id:"ABM",visible:!!this.props.menu.includes("ABM"),data:a.ABM,getPath:function(e){return e.path},getTimestamps:function(e){return e.timestamps},getColor:function(e){switch(e.mode[0]){case 0:return[228,26,28];case 1:return[55,126,184];case 2:return[77,175,74];case 3:return[255,255,51];case 4:return[152,78,163];case 5:return[255,127,0];default:return[255,255,255]}},getWidth:1,widthScale:this._remapValues(t),opacity:.8,rounded:!0,trailLength:500,currentTime:this.props.sliders.time[1]})),this.props.menu.includes("PATHS")&&n.push(new Ge.a({id:"PATHS",visible:!!this.props.menu.includes("PATHS"),_shadow:!1,data:a.ABM,getPath:function(e){var t=Math.random()<.5?5e-5*Math.random():-5e-5*Math.random();for(var a in e.path)e.path[a][0]=e.path[a][0]+t,e.path[a][1]=e.path[a][1]+t,e.path[a][2]=2*e.mode[0];return e.path},getColor:function(e){switch(e.mode[0]){case 0:return[228,26,28];case 1:return[55,126,184];case 2:return[77,175,74];case 3:return[255,255,51];case 4:return[152,78,163];case 5:return[255,127,0];default:return[255,255,255]}},opacity:.2,getWidth:1.5})),n}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"baseMap",onKeyDown:this._handleKeyDown,onKeyUp:this._handleKeyUp,onMouseMove:function(t){return e.setState({mousePos:t.nativeEvent})},onMouseUp:function(){return e.setState({mouseDown:!1})},onMouseDown:function(){return e.setState({mouseDown:!0})}},r.a.createElement(r.a.Fragment,null,this._renderSelectionTarget()),r.a.createElement(_e.a,{getCursor:function(){return e.props.menu.includes("EDIT")?"none":"all-scroll"},ref:function(t){e.deckGL=t&&t.deck},viewState:this.state.viewState,onViewStateChange:this._onViewStateChange,layers:this._renderLayers(),effects:this._effects,controller:{touchZoom:!0,touchRotate:!0,dragPan:!this.state.draggingWhileEditing,dragRotate:!this.state.draggingWhileEditing,keyboard:!1}},r.a.createElement(Re.a,{asyncRender:!0,dragRotate:!0,reuseMaps:!0,mapboxApiAccessToken:"pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg",mapStyle:E.map.mapStyle.blue,preventStyleDiffing:!0})))}}]),a}(n.Component),ze={listenToSlidersEvents:g},He=Object(d.b)((function(e){return{cityioData:e.CITYIO,sliders:e.SLIDERS,menu:e.MENU,accessToggle:e.ACCESS_TOGGLE}}),ze)(We),Ve=a(355).solve,Ye=function(e,t){for(var a=[],n=[],r=0,o=e.length;r<o;++r){var i=Object(L.a)(e[r],2),s=i[0],l=i[1],c=Object(L.a)(t[r],2),u=c[0],d=c[1];a.push([s,l,1,0,0,0,-s*u,-l*u],[0,0,0,s,l,1,-s*d,-l*d]),n.push(u,d)}var p=Ve(a,n,!0);return[p[0],p[3],0,p[6],p[1],p[4],0,p[7],0,0,1,0,p[2],p[5],0,1].map((function(e){return function(e,t){var a=Math.pow(10,t),n=e*a;return Math.round(n)/a}(e,10)}))},qe=function(e){return"matrix3d(".concat(e.join(", "),")")},Ke=function(e){return"translate(".concat(e[0],"px, ").concat(e[1],"px)")},Je={container:{width:30,height:30,borderRadius:"50%",position:"absolute",border:"4px solid white",cursor:"move"},"top-left":{left:-15,top:-15},"bottom-left":{left:-15,bottom:-15},"top-right":{top:-15,right:-15},"bottom-right":{bottom:-15,right:-15}},Xe=function(e){var t=e.position,a=e.translation,r=e.onMouseEnter,o=e.onMouseDown,i=e.onMouseUp,s=e.className,l=void 0===s?"":s,c=e.style,u=void 0===c?{}:c;return n.createElement("div",{onMouseEnter:function(){return r&&r(t)},onMouseDown:function(e){return o(e,t)},onMouseUp:function(){return i(t)},className:l,style:Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},Je.container),Je[t]),u),{},{transform:Ke(a)})})},Ze=a(435),Qe=a(434),$e=a(277),et=a.n($e),tt=Object(G.a)((function(e){return{button:{margin:e.spacing(1),position:"fixed",top:"50vh",zIndex:1e3}}}));function at(){var e=tt();return r.a.createElement(Qe.a,{container:!0,alignItems:"center",justify:"center"},r.a.createElement(Ze.a,{variant:"contained",color:"secondary",className:e.button,startIcon:r.a.createElement(et.a,null)},"Reset Projection Mapping"))}var nt={position:"relative"},rt=["top-left","top-right","bottom-right","bottom-left"],ot=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],it=function(){var e={};return rt.forEach((function(t){e[t]=[0,0]})),e},st=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).container=void 0,e.layerTranslateDelta=void 0,e.anchorTranslateDelta=void 0,e.isAnchorDragging=!1,e.targetPoints=void 0,e.anchorMoving=void 0,e.state={matrix:ot,translateDelta:it(),sourcePoints:void 0,transformOrigin:[0,0],containerTranslate:[e.props.x||0,e.props.y||0]},e.onAnchorMouseDown=function(t,a){t.stopPropagation(),e.anchorTranslateDelta=[t.pageX-e.state.translateDelta[a][0],t.pageY-e.state.translateDelta[a][1]],e.anchorMoving=a},e.onAnchorMouseMove=function(t){if(e.anchorTranslateDelta&&e.state.sourcePoints&&e.anchorMoving){t.preventDefault(),t.stopPropagation();var a=rt.indexOf(e.anchorMoving),n=t.pageX-e.anchorTranslateDelta[0],r=t.pageY-e.anchorTranslateDelta[1];e.targetPoints[a]=[e.state.sourcePoints[a][0]+n,e.state.sourcePoints[a][1]+r],e.setState({matrix:Ye(e.state.sourcePoints,e.targetPoints),translateDelta:Object(h.a)(Object(h.a)({},e.state.translateDelta),{},Object(T.a)({},e.anchorMoving,[n,r]))})}},e.onAnchorMouseUp=function(t){e.anchorTranslateDelta=void 0,e.anchorMoving=void 0},e.onMouseUp=function(){e.layerTranslateDelta=void 0},e.onMouseMove=function(t){if(e.layerTranslateDelta&&e.props.isEditMode){var a=[t.pageX-e.layerTranslateDelta[0],t.pageY-e.layerTranslateDelta[1]];e.setState({containerTranslate:a})}},e.onMouseDown=function(t){var a=e.state.containerTranslate;e.layerTranslateDelta=[t.pageX-a[0],t.pageY-a[1]]},e._clearLocalStraoge=function(){localStorage.getItem("projMap")&&localStorage.removeItem("projMap"),window.location.reload()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){if(window.addEventListener("mousemove",this.onAnchorMouseMove),window.addEventListener("mousemove",this.onMouseMove),this.container){var e=this.container.getBoundingClientRect(),t=e.width,a=e.height,n=[[0,0],[t,0],[t,a],[0,a]];this.targetPoints=[].concat(n),this.setState({sourcePoints:n})}}},{key:"componentDidUpdate",value:function(e,t){if(!e.isEditMode&&this.props.isEditMode){if(localStorage.getItem("projMap")){console.log("loading prev. projMap...");var a=localStorage.getItem("projMap");this.setState(JSON.parse(a))}}else e.isEditMode&&!this.props.isEditMode&&(console.log("saving edited projMap..."),localStorage.setItem("projMap",JSON.stringify(t)))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.onAnchorMouseMove),window.removeEventListener("mousemove",this.onMouseMove)}},{key:"render",value:function(){var e=this,t=this.props,a=t.style,r=t.isEditMode,o=t.className,i=t.anchorStyle,s=t.anchorClassName,l=this.state,c=l.translateDelta,u=l.matrix,d=l.containerTranslate,p=l.transformOrigin;return n.createElement(n.Fragment,null,r&&n.createElement("div",{onClick:function(){return e._clearLocalStraoge()}},n.createElement(at,null)),n.createElement("div",{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,style:{cursor:r?"all-scroll":"inherit",position:"relative",display:"inline-block",transform:Ke(d)}},n.createElement("div",{ref:function(t){e.container=t},style:Object(h.a)(Object(h.a)(Object(h.a)({},nt),a),{},{pointerEvents:r?"none":"all",transform:qe(u),transformOrigin:"".concat(p[0],"px ").concat(p[1],"px 0px")}),className:o},this.props.children),r&&n.createElement("div",null,rt.map((function(t,a){return n.createElement(Xe,{style:i,className:s,key:t,translation:c[t],position:t,onMouseDown:e.onAnchorMouseDown,onMouseUp:e.onAnchorMouseUp})})))))}}]),a}(n.Component),lt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._checkKeystone=function(){return!!e.props.menu.includes("KS")},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{background:"black",height:"100vh",width:"100vw",maxWidth:"100%",overflow:"hidden"}},r.a.createElement(st,{className:"mapLayer",style:{height:"100vh",width:"100vw"},isEditMode:this._checkKeystone()},r.a.createElement(He,{menu:this.props.menu,selectedType:this.props.selectedType})))}}]),a}(n.Component),ct=Object(d.b)((function(e){return{menu:e.MENU,selectedType:e.SELECTED_TYPE}}),null)(lt),ut=a(84),dt=(a(259),a(376),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={domains:[],radarData:[]},n.radarSize=350,n.colorRange=["#fc03ec","#79C7E3"],n}return Object(l.a)(a,[{key:"generateData",value:function(){for(var e=this.props.cityioData.indicators,t={},a=[],n=0;n<e.length;n++)"radar"===e[n].viz_type&&(t[e[n].name]=e[n].value,e[n].domain=[0,1],a.push(e[n]));this.setState({radarData:[t],domains:a})}},{key:"componentDidMount",value:function(){console.log("...init radar"),this.setState({indicators:this.props.indicators}),this.generateData()}},{key:"componentDidUpdate",value:function(e){e.cityioData.indicators!==this.props.cityioData.indicators&&(this.setState({indicators:this.props.indicators}),console.log("new radar data.."),this.generateData())}},{key:"render",value:function(){return this.props.cityioData.indicators?r.a.createElement("div",null,r.a.createElement(ut.c,{className:"Radar blur",animation:!0,data:this.state.radarData,domains:this.state.domains,colorRange:this.colorRange,style:{polygons:{fillOpacity:.2,strokeWidth:2},axes:{text:{opacity:0,fontWeight:700,fill:"white"},strokeWidth:0},labels:{textAnchor:"middle",fontSize:8,fontWeight:"600",fill:"white"}},margin:{left:this.radarSize/6,top:this.radarSize/6,bottom:this.radarSize/6,right:this.radarSize/6},width:this.radarSize,height:this.radarSize},r.a.createElement(ut.a,{style:{fill:"white",fillOpacity:.1,backgroundColor:"#fff",opacity:.5,stroke:"white",width:.1},tickValues:Object(N.a)(new Array(11)).map((function(e,t){return t/10-1}))}))):null}}]),a}(n.Component)),pt=a(279),mt=a.n(pt),ht=Object(G.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}}));function gt(e){var t=ht();return r.a.createElement("div",{className:t.root},r.a.createElement(Ze.a,{onClick:function(){!function(e){var t=JSON.stringify(e),a=document.createElement("a"),n=new Blob([t],{type:"text/plain"});a.href=URL.createObjectURL(n),a.download="data.json",document.body.appendChild(a),a.click()}(e)},size:"small",variant:"outlined",color:"secondary",className:t.button,startIcon:r.a.createElement(mt.a,null)},e.title))}var ft=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={barChartData:null},n.colorRange=["#fc03ec","#79C7E3"],n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("....init BarChart"),this.generateData()}},{key:"generateData",value:function(){for(var e=this.props.cityioData.indicators,t=[],a=0;a<e.length;a++)"bar"===e[a].viz_type&&t.push({x:e[a].name,y:e[a].value});this.setState({barChartData:t})}},{key:"componentDidUpdate",value:function(e){e.cityioData.indicators!==this.props.cityioData.indicators&&this.generateData()}},{key:"render",value:function(){return this.state.barChartData?r.a.createElement("div",null,r.a.createElement(ut.b,{color:this.colorRange[1],opacity:.25,xType:"ordinal",width:350,height:250,stackBy:"y",yDomain:[0,1]},r.a.createElement(ut.f,{style:{text:{fill:"#fff"}},tickLabelAngle:90}),r.a.createElement(ut.g,{style:{text:{fill:"#fff"}}}),r.a.createElement(ut.e,{data:this.state.barChartData})),r.a.createElement(gt,{data:this.props.cityioData.indicators,title:"radar & bars data"})):null}}]),a}(n.Component);function Et(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function yt(e){var t=Object(n.useState)(!1),a=Object(L.a)(t,2),o=a[0],i=a[1],s=function(){var t=e.cityioData.GEOGRID.properties.header.cellSize,a=e.cityioData.GEOGRIDDATA,n={};a.forEach((function(e){var a,r,o,i=e.name;if("None"!==e.name)if(n.hasOwnProperty(i)){n[i].count=n[i].count+1;var s=e.height<1?1:e.height;n[i].area=n[i].area+s*t}else n[i]={},n[i].area=0,n[i].count=0,n[i].name=i,n[i].color=(a=e.color[0],r=e.color[1],o=e.color[2],"#"+Et(a)+Et(r)+Et(o))}));var r=[];for(var o in n)r.push(n[o]);return{children:r,color:1}}();return r.a.createElement(F.a,null,r.a.createElement(B.a,null,o?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,o.data.name,": ",o.data.area," sqm")):r.a.createElement("p",null,"Hover on chart...")),r.a.createElement(B.a,null,r.a.createElement(ut.d,{onLeafMouseOver:function(e){return i(e)},onLeafMouseOut:function(){return i(!1)},colorType:"literal",animation:!0,className:"nested-tree-example",data:s,height:400,width:400,getSize:function(e){return e.area},getLabel:function(e){return e.name+" cells: "+e.count}})),r.a.createElement(gt,{data:s,title:"area data"}))}var vt=Object(d.b)((function(e){return{cityioData:e.CITYIO,menu:e.MENU}}),null)((function(e){var t=Object(G.a)({root:{display:"flex",paddingLeft:16,paddingRight:16},paper:{background:"#1D1F21",width:400},list:{color:"#fFF"},text:{marginLeft:16,marginTop:12,flexGrow:1,fontSize:20,marginBottom:12,fontWeight:"lighter"},dividerColor:{backgroundColor:"#484848"}})(),a=e.menu&&e.menu.includes("RADAR");return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(x.a,{className:t.root,variant:"persistent",anchor:"right",open:!0,classes:{paper:t.paper}},r.a.createElement(F.a,{className:t.list},r.a.createElement(B.a,null,r.a.createElement(W.a,{className:t.text},r.a.createElement("h2",null,"Urban Indicators"))),r.a.createElement(B.a,null,r.a.createElement(dt,{cityioData:e.cityioData})),r.a.createElement(B.a,null,r.a.createElement(ft,{cityioData:e.cityioData})),r.a.createElement(z.a,{variant:"middle",classes:{root:t.dividerColor}}),r.a.createElement(B.a,null,r.a.createElement(yt,{cityioData:e.cityioData})))))})),bt=a(280),Ot=a(218),St=a(282),Dt=a.n(St);function wt(){var e=Object(bt.a)(["\n    display: block;\n    margin: 0 auto;\n    border-color: none;\n"]);return wt=function(){return e},e}var Tt=Object(Ot.css)(wt());var kt=function(){var e=Object(d.d)((function(e){return e.LOADING}));return r.a.createElement("div",{style:{position:"fixed",bottom:50,right:50,zIndex:1}},r.a.createElement(Dt.a,{css:Tt,size:20,color:"white",loading:e}))};var It=function(e){var t=Object(d.d)((function(e){return e.READY})),a=e.tableName;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{tableName:a}),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe,null),r.a.createElement(ct,null),r.a.createElement(vt,null)),r.a.createElement(kt,null))},jt=a(438),Ct=w(),Mt=function(){var e=window.location.toString(),t="cityscope=",a=e.substring(e.indexOf(t)+t.length),n=null;return n=-1!==e.indexOf(t)&&a.length>0?a:"grasbrook",console.log("%c loading CityScope project: "+n,j),r.a.createElement(p,{store:Ct},r.a.createElement(jt.b,{injectFirst:!0},r.a.createElement(It,{tableName:n})))},Rt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(Mt,null)}}]),a}(n.Component),_t=document.getElementById("root");i.a.render(r.a.createElement(Rt,null),_t)},43:function(e){e.exports=JSON.parse('{"docsURL":"https://raw.githubusercontent.com/CityScope/CS_cityscopeJS/master/docs/","cityIO":{"mockURL":"http://localhost:3001","baseURL":"https://cityio.media.mit.edu/api/table/","interval":500,"cityIOmodules":["header","GEOGRID","ABM","grid","access","GEONETWORK","GEOGRIDDATA","indicators"]},"map":{"mapStyle":{"sat":"mapbox://styles/relnox/cjs9rb33k2pix1fo833uweyjd?fresh=true","dark":"mapbox://styles/relnox/cjl58dpkq2jjp2rmzyrdvfsds?fresh=true","blue":"mapbox://styles/relnox/ck0h5xn701bpr1dqs3he2lecq?fresh=true"},"layers":{"ABM":{"startSimHour":25200,"endSimHour":50400,"animationSpeed":20},"heatmap":{"colors":[[213,62,79],[252,141,89],[254,224,139],[230,245,152],[153,213,148],[50,136,189]]}},"initialViewState":{"longitude":-71.0894527,"latitude":42.3603609,"zoom":17,"pitch":0,"bearing":0},"netTypes":{"0":{"width":10,"color":[0,0,0],"name":"Delete Path","class":"networkClass"},"1":{"width":5,"color":[100,100,100,200],"name":"two lanes","class":"networkClass"},"2":{"width":10,"color":[50,50,50,200],"name":"four lanes","class":"networkClass"},"3":{"width":2,"color":[0,200,20,200],"name":"bike lanes","class":"networkClass"},"4":{"width":2,"color":[200,200,0,200],"name":"walkway","class":"networkClass"}},"types":{"0":{"height":0,"color":[0,0,0,0],"name":"Reset","class":"buildingsClass"},"1":{"height":0,"color":[100,150,240,180],"name":"Plaza","class":"buildingsClass"},"2":{"height":0,"color":[0,150,220,180],"name":"Park","class":"buildingsClass"},"3":{"height":[0,10],"color":[133,94,247,180],"name":"Residential","class":"buildingsClass"},"4":{"height":[0,50],"color":[247,94,133,180],"name":"Office Tower","class":"buildingsClass"},"5":{"height":[0,50],"color":[228,13,213,180],"name":"Mix-use","class":"buildingsClass"},"6":{"height":[0,20],"color":[133,0,135,180],"name":"Service","class":"buildingsClass"}}},"menu":{"toggles":{"GRID":{"displayName":"Interactive Grid","showOnInit":true,"requireModule":"GEOGRID"},"NETWORK":{"displayName":"Mobility Network","showOnInit":true,"requireModule":"GEOGRID"},"TEXT":{"displayName":"Cell Information","showOnInit":false,"requireModule":"GEOGRID"},"ABM":{"displayName":"Mobility Simulation","showOnInit":false,"requireModule":"ABM"},"SHADOWS":{"displayName":"Shadows","showOnInit":true,"requireModule":"GEOGRID"},"PATHS":{"displayName":"Aggregated Mobility","showOnInit":false,"requireModule":"ABM"},"ACCESS":{"displayName":"Accessibility Analysis","showOnInit":false,"requireModule":"access"},"RADAR":{"displayName":"Urban Indicators","showOnInit":true,"requireModule":"indicators"},"ROTATE":{"displayName":"Rotate Camera","showOnInit":false,"requireModule":false},"KS":{"displayName":"Projection Mapping","showOnInit":false,"requireModule":false}}}}')}},[[326,1,2]]]);
//# sourceMappingURL=main.05829878.chunk.js.map